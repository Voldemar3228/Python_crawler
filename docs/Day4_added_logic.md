## –î–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
### 1Ô∏è‚É£ RateLimiter

* –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∫–æ–Ω—Ç—Ä–æ–ª—å —á–∞—Å—Ç–æ—Ç—ã –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ —É—Ä–æ–≤–Ω–µ **–¥–æ–º–µ–Ω–∞** –∏ **–≥–ª–æ–±–∞–ª—å–Ω–æ**.
* –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç **–º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∑–∞–¥–µ—Ä–∂–∫–∏ (`min_delay`)** –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏.
* –î–æ–±–∞–≤–ª–µ–Ω **jitter** ‚Äî —Å–ª—É—á–∞–π–Ω—ã–µ –∑–∞–¥–µ—Ä–∂–∫–∏ –¥–ª—è –∏–º–∏—Ç–∞—Ü–∏–∏ —á–µ–ª–æ–≤–µ—á–µ—Å–∫–æ–≥–æ –ø–æ–≤–µ–¥–µ–Ω–∏—è.
* –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º –∑–∞–ø—Ä–æ—Å–æ–º, —á—Ç–æ–±—ã **–Ω–µ –ø–µ—Ä–µ–≥—Ä—É–∂–∞—Ç—å —Å–µ—Ä–≤–µ—Ä**.
* –°–æ–±–∏—Ä–∞–µ—Ç—Å—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –≤—Ä–µ–º–µ–Ω–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ (`request_times`) –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Å—Ä–µ–¥–Ω–µ–π –∑–∞–¥–µ—Ä–∂–∫–∏ –∏ —Å–∫–æ—Ä–æ—Å—Ç–∏.

---

### 2Ô∏è‚É£ –°–æ–±–ª—é–¥–µ–Ω–∏–µ robots.txt

* –ö—Ä–∞—É–ª–µ—Ä —Ç–µ–ø–µ—Ä—å **–ø–∞—Ä—Å–∏—Ç robots.txt** –∫–∞–∂–¥–æ–≥–æ –¥–æ–º–µ–Ω–∞.
* –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —Ä–∞–∑—Ä–µ—à–µ–Ω–æ –ª–∏ **`User-Agent`** –¥–µ–ª–∞—Ç—å –∑–∞–ø—Ä–æ—Å –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É URL.
* URL, –∑–∞–ø—Ä–µ—â—ë–Ω–Ω—ã–µ –≤ robots.txt, **–Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è** –∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è (`blocked_urls_by_robots`).
* –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è **crawl-delay** –∏–∑ robots.txt –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö –ø–∞—É–∑ –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏.

---

### 3Ô∏è‚É£ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏

* –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω **exponential backoff** –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö —Å–µ—Ç–∏ –∏–ª–∏ —Ç–∞–π–º–∞—É—Ç–∞—Ö.
* –õ–æ–≥–∏—Ä—É—é—Ç—Å—è –≤—Å–µ –æ—à–∏–±–∫–∏: HTTP, —Å–µ—Ç–µ–≤—ã–µ, —Ç–∞–π–º–∞—É—Ç—ã, –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–µ.
* –ö—Ä–∞—É–ª–µ—Ä **–Ω–µ –∑–∞–≤–∏—Å–∞–µ—Ç**, –µ—Å–ª–∏ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞ ‚Äî –ø–æ–≤—Ç–æ—Ä—è–µ—Ç –∑–∞–ø—Ä–æ—Å —Å –Ω–∞—Ä–∞—Å—Ç–∞—é—â–µ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π.

---

### 4Ô∏è‚É£ –£–ª—É—á—à–µ–Ω–Ω—ã–π crawl engine

* **–ì–ª—É–±–∏–Ω–∞ (`max_depth`)** –∏ **–º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–∞–Ω–∏—Ü (`max_pages`)** –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É—é—Ç—Å—è.
* –î–æ–±–∞–≤–ª–µ–Ω–∞ **—Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è URL** –ø–æ include/exclude –ø–∞—Ç—Ç–µ—Ä–Ω–∞–º.
* –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **semaphore** –¥–ª—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π –Ω–∞ –¥–æ–º–µ–Ω.
* URL, —É–∂–µ –ø–æ—Å–µ—â—ë–Ω–Ω—ã–µ, **–Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –ø–æ–≤—Ç–æ—Ä–Ω–æ**.

---

### 5Ô∏è‚É£ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

* –í —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–≤–æ–¥–∏—Ç—Å—è –ø—Ä–æ–≥—Ä–µ—Å—Å:

  * –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü
  * –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–∞–Ω–∏—Ü –≤ –æ—á–µ—Ä–µ–¥–∏
  * –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—à–∏–±–æ–∫
  * –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö robots.txt URL
  * –¢–µ–∫—É—â–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å –∑–∞–ø—Ä–æ—Å–æ–≤ (—Å—Ç—Ä–∞–Ω–∏—Ü/—Å–µ–∫)
  * –°—Ä–µ–¥–Ω—è—è –∑–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏

---

### 6Ô∏è‚É£ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

* –°–æ–∑–¥–∞–Ω—ã —Ç–µ—Å—Ç—ã –¥–ª—è:

  * –ü—Ä–æ–≤–µ—Ä–∫–∏ **rate limiting** –Ω–∞ –æ–¥–Ω–æ–º –∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –¥–æ–º–µ–Ω–∞—Ö
  * –ü—Ä–æ–≤–µ—Ä–∫–∏ **robots.txt –∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –∑–∞–ø—Ä–µ—â—ë–Ω–Ω—ã—Ö URL**
  * –ü—Ä–æ–≤–µ—Ä–∫–∏ **—Å–æ–±–ª—é–¥–µ–Ω–∏—è –∑–∞–¥–µ—Ä–∂–µ–∫ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ request_times**
* –í—Å–µ —Ç–µ—Å—Ç—ã —Ç–µ–ø–µ—Ä—å –ø—Ä–æ—Ö–æ–¥—è—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ, –≤–∫–ª—é—á–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∏, —á—Ç–æ **–∑–∞–ø—Ä–µ—â—ë–Ω–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è**, –∞ **–∑–∞–¥–µ—Ä–∂–∫–∏ —Å–æ–±–ª—é–¥–∞—é—Ç—Å—è**.
---

## üîπ –°—Ö–µ–º–∞ —Ä–∞–±–æ—Ç—ã AsyncCrawler

```
Start URLs
    ‚îÇ
    ‚ñº
[URL Queue]  <‚îÄ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –Ω–æ–≤—ã–µ —Å—Å—ã–ª–∫–∏ –∏–∑ parsed HTML
    ‚îÇ
    ‚ñº
[Worker Task] ‚îÄ‚îÄ‚îê
    ‚îÇ            ‚îÇ
    ‚îÇ        (Semaphore)  ‚Üê –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ max_concurrent –∏ per-domain
    ‚ñº            ‚îÇ
[Check URL]      ‚îÇ
    ‚îÇ
    ‚îú‚îÄ> _is_allowed_domain()  ‚îÄ‚îÄ> —Ñ–∏–ª—å—Ç—Ä—É–µ–º –¥–æ–º–µ–Ω—ã
    ‚îÇ
    ‚îú‚îÄ> _is_allowed_url()     ‚îÄ‚îÄ> —Ñ–∏–ª—å—Ç—Ä—É–µ–º include/exclude –ø–∞—Ç—Ç–µ—Ä–Ω—ã
    ‚îÇ
    ‚îî‚îÄ> robots.txt check       ‚Üê –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ URL –≤ blocked_urls_by_robots
    ‚îÇ
    ‚ñº
[RateLimiter]  ‚Üê –∂–¥—ë–º min_delay + jitter, —É—á–∏—Ç—ã–≤–∞–µ–º crawl-delay
    ‚îÇ
    ‚ñº
[Fetch URL]  ‚Üê –∑–∞–ø—Ä–æ—Å —Å User-Agent –∏ –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫ (backoff)
    ‚îÇ
    ‚îú‚îÄ> Success ‚Üí HTML
    ‚îÇ
    ‚îî‚îÄ> Fail ‚Üí failed_urls
    ‚îÇ
    ‚ñº
[Parse HTML]  ‚Üê HTMLParser –∏–∑–≤–ª–µ–∫–∞–µ—Ç links, text, metadata
    ‚îÇ
    ‚îú‚îÄ> –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–µ —Å—Å—ã–ª–∫–∏ –≤ –æ—á–µ—Ä–µ–¥—å (–µ—Å–ª–∏ depth < max_depth)
    ‚îÇ
    ‚ñº
[Update Statistics]  
    ‚îú‚îÄ> processed_urls
    ‚îú‚îÄ> blocked_urls_by_robots
    ‚îú‚îÄ> failed_urls
    ‚îî‚îÄ> request_times
    ‚îÇ
    ‚ñº
[Progress Logger]  ‚Üê –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç:
    - pages processed
    - pages in queue
    - failed pages
    - blocked by robots
    - speed (pages/sec)
    - average request delay
    ‚îÇ
    ‚ñº
    Repeat until queue empty or max_pages reached
```

---

### üîπ –ì–¥–µ —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç                  | –†–æ–ª—å –∏ –º–µ—Å—Ç–æ —Ä–∞–±–æ—Ç—ã                                                 |
| -------------------------- | ------------------------------------------------------------------- |
| **RateLimiter**            | –ü–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º fetch_url, —É—á–∏—Ç—ã–≤–∞–µ—Ç min_delay + jitter                |
| **RobotsParser**           | –ü–µ—Ä–µ–¥ fetch_url –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ä–∞–∑—Ä–µ—à—ë–Ω –ª–∏ URL –¥–ª—è User-Agent            |
| **SemaphoreManager**       | –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∏ –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ –æ–¥–∏–Ω –¥–æ–º–µ–Ω          |
| **HTMLParser**             | –ü–æ—Å–ª–µ fetch_url –∏–∑–≤–ª–µ–∫–∞–µ—Ç —Å—Å—ã–ª–∫–∏ –∏ –∫–æ–Ω—Ç–µ–Ω—Ç –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ |
| **request_times**          | –ó–∞–ø–∏—Å—ã–≤–∞–µ—Ç –∑–∞–¥–µ—Ä–∂–∫—É –∫–∞–∂–¥–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏                  |
| **blocked_urls_by_robots** | –õ–æ–≥–∏—Ä—É–µ—Ç URL, –∑–∞–ø—Ä–µ—â—ë–Ω–Ω—ã–µ robots.txt                                |

---